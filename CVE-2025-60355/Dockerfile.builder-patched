# Build OneBlog 2.3.9 JARs from source (patched version)
FROM maven:3.8.6-openjdk-8-slim
WORKDIR /build
COPY . .
# Checkout the fix commit (v2.3.9)
RUN git checkout ac1c801f06a595dab6d3a9c26d4a130b0ca5fac2
RUN mvn clean package -DskipTests -Pdev -pl blog-core,blog-admin,blog-web -am --batch-mode
# Output: /build/blog-admin/target/blog-admin.jar
# Output: /build/blog-web/target/blog-web.jar
