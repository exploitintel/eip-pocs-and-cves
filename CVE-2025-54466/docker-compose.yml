# docker-compose.yml — CVE-2025-54466 Lab Environment
#
# Apache OFBiz Scrum Plugin — SVN Argument Injection to RCE
#
# Usage:
#   docker compose build
#   docker compose up -d
#   python3 poc/poc.py localhost 8443
#   docker compose down

services:
  vulnerable:
    build:
      context: .
      dockerfile: Dockerfile.vulnerable
    container_name: cve-2025-54466-vulnerable
    ports:
      - "8443:8443"
    volumes:
      - ./poc:/opt/poc
    environment:
      - OFBIZ_SKIP_INIT=true
    healthcheck:
      test: ["CMD", "curl", "-fks", "https://localhost:8443/accounting/control/main"]
      interval: 15s
      timeout: 10s
      retries: 20
      start_period: 180s
    networks:
      - lab-net

networks:
  lab-net:
    driver: bridge
