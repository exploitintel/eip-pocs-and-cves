# CVE-2025-29927 Lab - Next.js Middleware Authorization Bypass
# Installs vulnerable Next.js 14.2.24 from npm with auth middleware

FROM node:18-slim

WORKDIR /app

# Copy package.json and install dependencies
COPY vulnerable-app/package.json ./
RUN npm install --force 2>&1

# Copy application source
COPY vulnerable-app/ ./

# Build the Next.js application
RUN npm run build

# Expose Next.js default port
EXPOSE 3000

# Start in production mode
CMD ["npm", "run", "start"]
