# Java tuning
DRUID_SINGLE_NODE_CONF=micro-quickstart

druid_emitter_logging_logLevel=debug

# Extensions - must include druid-basic-security for LDAP auth
druid_extensions_loadList=["druid-histogram", "druid-datasketches", "druid-lookups-cached-global", "postgresql-metadata-storage", "druid-basic-security"]

# ZooKeeper
druid_zk_service_host=cve-2026-23906-zookeeper

# Metadata storage (PostgreSQL)
druid_metadata_storage_host=
druid_metadata_storage_type=postgresql
druid_metadata_storage_connector_connectURI=jdbc:postgresql://cve-2026-23906-postgres:5432/druid
druid_metadata_storage_connector_user=druid
druid_metadata_storage_connector_password=FoolishPassword

# Indexer
druid_indexer_runner_javaOptsArray=["-server", "-Xmx1g", "-Xms1g", "-XX:MaxDirectMemorySize=3g", "-Duser.timezone=UTC", "-Dfile.encoding=UTF-8", "-Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager"]
druid_indexer_fork_property_druid_processing_buffer_sizeBytes=256MiB

# Storage
druid_storage_type=local
druid_storage_storageDirectory=/opt/shared/segments
druid_indexer_logs_type=file
druid_indexer_logs_directory=/opt/shared/indexing-logs

# Processing
druid_processing_numThreads=2
druid_processing_numMergeBuffers=2

# SQL
druid_sql_enable=true

# ---- LDAP Authentication Configuration ----
# Authenticator chain: use LDAP
druid_auth_authenticatorChain=["ldap"]
druid_auth_authenticator_ldap_type=basic
druid_auth_authenticator_ldap_credentialsValidator_type=ldap
druid_auth_authenticator_ldap_credentialsValidator_url=ldap://cve-2026-23906-openldap:389
druid_auth_authenticator_ldap_credentialsValidator_bindUser=cn=admin,dc=example,dc=org
druid_auth_authenticator_ldap_credentialsValidator_bindPassword=admin
druid_auth_authenticator_ldap_credentialsValidator_baseDn=ou=Users,dc=example,dc=org
druid_auth_authenticator_ldap_credentialsValidator_userSearch=(&(uid=%s)(objectClass=inetOrgPerson))
druid_auth_authenticator_ldap_credentialsValidator_userAttribute=uid
druid_auth_authenticator_ldap_authorizerName=ldapauth
druid_auth_authenticator_ldap_initialAdminPassword=priest
druid_auth_authenticator_ldap_initialInternalClientPassword=warlock

# Authorizer
druid_auth_authorizer_ldapauth_type=basic
druid_auth_authorizer_ldapauth_initialAdminUser=admin
druid_auth_authorizer_ldapauth_initialAdminRole=admin
druid_auth_authorizer_ldapauth_roleProvider_type=ldap
druid_auth_authorizers=["ldapauth"]

# Escalator (internal service-to-service auth)
druid_escalator_type=basic
druid_escalator_internalClientUsername=druid_system
druid_escalator_internalClientPassword=warlock
druid_escalator_authorizerName=ldapauth

# Logging
DRUID_LOG4J=<?xml version="1.0" encoding="UTF-8" ?><Configuration status="WARN"><Appenders><Console name="Console" target="SYSTEM_OUT"><PatternLayout pattern="%d{ISO8601} %p [%t] %c - %m%n"/></Console></Appenders><Loggers><Root level="info"><AppenderRef ref="Console"/></Root><Logger name="org.apache.druid.jetty.RequestLog" additivity="false" level="DEBUG"><AppenderRef ref="Console"/></Logger></Loggers></Configuration>
