# CVE-2026-23906 Lab - OpenLDAP with Anonymous Bind Support
# Custom OpenLDAP image that enables unauthenticated (anonymous) binds,
# which is the prerequisite for the Druid LDAP auth bypass.

FROM osixia/openldap:1.4.0

# Bake in the bootstrap LDIF with test users
COPY ldap-configs/bootstrap.ldif /container/service/slapd/assets/config/bootstrap/ldif/custom/bootstrap.ldif

# Copy the custom entrypoint that enables unauthenticated binds
COPY openldap-entrypoint.sh /openldap-entrypoint.sh
RUN chmod +x /openldap-entrypoint.sh

ENTRYPOINT ["/openldap-entrypoint.sh"]
