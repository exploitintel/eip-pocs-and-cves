#!/bin/bash
set -e

cd /app/larecipe-lab

# Ensure storage permissions (in case volume mounts changed them)
chmod -R 775 storage bootstrap/cache 2>/dev/null || true

# Clear compiled views to ensure fresh Blade compilation on each request
php artisan view:clear 2>/dev/null || true

echo "[*] LaRecipe lab container starting..."
echo "[*] Documentation endpoint: http://0.0.0.0:8000/docs/1.0/overview"
echo "[*] Starting Laravel development server on 0.0.0.0:8000..."
exec php artisan serve --host=0.0.0.0 --port=8000
