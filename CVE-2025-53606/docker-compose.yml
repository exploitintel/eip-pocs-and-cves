# CVE-2025-53606 â€” Apache Seata Fury Deserializer Whitelist Bypass
# Vulnerable (2.4.0) + Patched (2.5.0) lab environment
services:
  vulnerable:
    image: apache/seata-server:2.4.0
    container_name: cve-2025-53606-vulnerable
    ports:
      - "7091:7091"
      - "8091:8091"
    healthcheck:
      test: ["CMD-SHELL", "curl -sf http://localhost:7091/health || exit 1"]
      interval: 5s
      timeout: 5s
      retries: 20
      start_period: 15s

  patched:
    image: apache/seata-server:2.5.0
    container_name: cve-2025-53606-patched
    ports:
      - "7092:7091"
      - "8092:8091"
    healthcheck:
      test: ["CMD-SHELL", "bash -c 'echo > /dev/tcp/localhost/8091'"]
      interval: 5s
      timeout: 5s
      retries: 20
      start_period: 15s
